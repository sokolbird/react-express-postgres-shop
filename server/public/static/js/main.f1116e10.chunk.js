(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{199:function(e,t,a){e.exports=a(349)},204:function(e,t,a){},210:function(e,t,a){},300:function(e,t,a){},321:function(e,t,a){},323:function(e,t,a){},331:function(e,t,a){},349:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchProducts",function(){return ce}),a.d(n,"incrementPage",function(){return oe});var r={};a.r(r),a.d(r,"addToCart",function(){return ie});var c=a(0),o=a.n(c),i=a(44),l=a.n(i),s=(a(204),a(25)),u=a(26),m=a(29),d=a(27),p=a(30),h=a(15),f=a(353),E=a(13),g=a(351),v=a(56),b=a.n(v),y=a(57),O=a.n(y),j=a(11),N=a.n(j),w=a(58),x=a.n(w),C=a(59),P=a.n(C),k=a(40),T=a.n(k),M=(a(210),Object(E.withStyles)({root:{flexGrow:1},grow:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"space-around"},appbar:{boxShadow:"none"}})(function(e){var t=e.classes,a=e.cartCount;return o.a.createElement(b.a,{position:"static",className:t.appbar},o.a.createElement(O.a,null,o.a.createElement("div",{className:t.grow},o.a.createElement(N.a,{variant:"h6",color:"inherit"},"SHOP"),o.a.createElement(g.a,{exact:!0,to:"/",activeClassName:"active-link",className:"nav-link"},o.a.createElement(N.a,{variant:"h6",color:"inherit"},"Home")),o.a.createElement(g.a,{exact:!0,to:"/products",activeClassName:"active-link",className:"nav-link"},o.a.createElement(N.a,{variant:"h6",color:"inherit"},"Products"))),o.a.createElement(g.a,{exact:!0,to:"/cart",activeClassName:"active-cart",className:"cart-link"},o.a.createElement(x.a,{color:"inherit"},o.a.createElement(P.a,{badgeContent:a,color:"secondary"},o.a.createElement(T.a,null))))))})),R=Object(h.b)(function(e){return{cartCount:e.cart.length}},null)(M),L=function(e){return o.a.createElement("div",{className:"main"},e.children)},S="CATCH_ERROR",A="CLEAR_ERROR",_=function(e){return{type:S,payload:e}},D=a(352),q=(a(300),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearError()}},{key:"render",value:function(){return this.props.error?o.a.createElement(D.a,{to:"/error"}):null}}]),t}(c.Component)),F=Object(h.b)(function(e){return{error:e.error}},function(e){return{clearError:function(){return e({type:A})}}})(q),G=function(e){return o.a.createElement(c.Fragment,null,o.a.createElement(R,null),o.a.createElement(L,null,e.children),o.a.createElement(F,null))},H=a(28),B=a(111),I=a(112),U=a(33),W=a(16),z="GET_PRODUCTS",J="FETCH_PRODUCT",Q="INCREMENT_PAGE",Y={settings:{page:1,stopLoadMore:!0},items:[]};var K={};var V="";var X="ADD_TO_CART",Z=[];var $=Object(H.combineReducers)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case z:return Object(W.a)({},e,{items:[].concat(Object(U.a)(e.items),Object(U.a)(n.items)),settings:Object(W.a)({},e.settings,{stopLoadMore:n.stopLoadMore})});case Q:return Object(W.a)({},e,{settings:{page:e.settings.page+1}});default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case J:return Object(W.a)({},n);default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case S:return n;case A:return"";default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case X:var r=e.find(function(e){return e.id===n.id});return r?e.map(function(e){return e.id===r.id?Object(W.a)({},e,{quantity:e.quantity+1}):e}):[].concat(Object(U.a)(e),[Object(W.a)({},n,{quantity:1})]);default:return e}}}),ee=a(354),te=a(350),ae=a(68),ne=a.n(ae),re=function(e){return{type:z,payload:{items:e.items,stopLoadMore:e.stopLoadMore}}},ce=function(){return function(e,t){var a=t().products.settings.page;ne.a.get("http://localhost:3000/api/products?_page=".concat(a,"&_limit=").concat(4)).then(function(a){Number(a.headers["x-total-count"])-t().products.items.length<4?e(re({items:a.data,stopLoadMore:!0})):e(re({items:a.data,stopLoadMore:!1}))})}},oe=function(){return{type:Q}},ie=function(e){return{type:X,payload:e}},le=(a(321),a(69)),se=a(270),ue=a(37),me=a.n(ue),de=a(60),pe=a.n(de),he=a(39),fe=a.n(he),Ee=a(38),ge=a.n(Ee),ve=a(32),be=a.n(ve);a(323);var ye=Object(E.withStyles)({card:{minWidth:350,margin:20},media:{height:300},content:{paddingBottom:0,textAlign:"center"},actions:{display:"flex",justifyContent:"center",paddingBottom:16},cart:{marginLeft:10},btn:{padding:"7px 10px"}})(function(e){var t=e.classes,a=e.name,n=e.category,r=e.price,c=e.id,i=e.addToCart;return o.a.createElement(me.a,{className:t.card},o.a.createElement(se.a,{to:"/products/".concat(c)},o.a.createElement(ge.a,{className:t.media,image:"https://loremflickr.com/200/300/?".concat(c)}),o.a.createElement(fe.a,{className:t.content},o.a.createElement(N.a,{variant:"headline"},a.length>=20?"".concat(a.slice(0,20),"..."):a),o.a.createElement(N.a,{variant:"caption"},n),o.a.createElement(N.a,{variant:"subheading"},r.toFixed(2)))),o.a.createElement(pe.a,{className:t.actions},o.a.createElement(be.a,{size:"small",variant:"contained",color:"primary",className:t.btn,onClick:i},"Add to cart",o.a.createElement(T.a,{className:t.cart}))))}),Oe=a(1),je=a.n(Oe),Ne=(je.a.number,je.a.string,je.a.string,je.a.number,je.a.string,function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).getMoreProducts=function(){var e=a.props,t=e.incrementPage;(0,e.fetchProducts)(),t()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.incrementPage,a=e.fetchProducts;0===e.products.length&&(a(),t())}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.addToCart,n=e.stopLoadMore;return o.a.createElement("div",{className:"product-list-wrapper"},o.a.createElement("div",{className:"product-list"},this.props.products.map(function(e){return o.a.createElement(ye,Object.assign({},e,{key:e.id,addToCart:function(){return a(e)}}))})),o.a.createElement(le.a,{variant:"contained",color:"primary",className:t.btn,onClick:this.getMoreProducts,disabled:n},"Show more"))}}]),t}(c.Component));Ne.defaultProps={products:[]};var we=Object(E.withStyles)({btn:{width:150}})(Ne),xe=Object(W.a)({},n,r),Ce=Object(h.b)(function(e){return{products:e.products.items,page:e.products.settings.page,stopLoadMore:e.products.settings.stopLoadMore}},xe)(we),Pe=function(e){return function(t){var a;ne.a.get("http://localhost:3000/api/products/".concat(e)).then(function(e){return a=e.status,e.data}).then(function(e){t(a>=400?_(a):{type:J,payload:e})}).catch(function(e){return t(_(e.message))})}},ke=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;0===Object.keys(this.props.product).length&&this.props.fetchProduct(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.product,n=e.addToCart;return o.a.createElement("div",{className:t.wrapper},o.a.createElement(me.a,{className:t.card},o.a.createElement("div",{className:t.details},o.a.createElement(fe.a,{className:t.content},o.a.createElement(N.a,{component:"h5",variant:"h5"},a.name),o.a.createElement(N.a,{variant:"subtitle1",color:"textSecondary"},a.category),o.a.createElement(N.a,{variant:"h6",color:"primary"},"Price:\xa0",a.price)),o.a.createElement(N.a,{variant:"body2",color:"textPrimary",className:t.description},a.description),o.a.createElement(le.b,null,o.a.createElement(be.a,{size:"small",variant:"contained",color:"primary",className:t.btn,onClick:function(){return n(a)}},"Add to cart",o.a.createElement(T.a,{className:t.cart})))),o.a.createElement(ge.a,{className:t.cover,image:"https://loremflickr.com/500/300/?".concat(a.id),title:"Product image"})))}}]),t}(c.Component);ke.defaultProps={product:{}};var Te=Object(E.withStyles)(function(){return{wrapper:{height:"100%",display:"flex",alignItems:"center",padding:"0 50px"},card:{display:"flex",justifyContent:"space-between",maxWidth:1e3,margin:"0 auto"},details:{display:"flex",flexDirection:"column",width:"62%",padding:20},cover:{width:"38%"},description:{padding:15,paddingTop:0},cart:{marginLeft:10},btn:{padding:"7px 10px"}}},{withTheme:!0})(ke),Me=a(70),Re=Object(Me.a)(function(e,t){var a=t.match.params.id;return{products:Object(U.a)(e.products.items),id:Number(a)}},function(e){return e.products.find(function(t){return t.id===e.id})}),Le=Object(h.b)(function(e,t){return{product:Re(e,t)||e.product,err:e.error}},function(e){return{fetchProduct:function(t){return e(Pe(t))},addToCart:function(t){return e(ie(t))}}})(Te),Se=Object(Me.a)(function(e){return e.cart},function(e){return e.reduce(function(e,t){return e+t.price*t.quantity},0)}),Ae=a(61),_e=a.n(Ae),De=a(63),qe=a.n(De),Fe=a(17),Ge=a.n(Fe),He=a(62),Be=a.n(He),Ie=a(46),Ue=a.n(Ie),We=a(36),ze=a.n(We),Je=a(64),Qe=a.n(Je),Ye=(a(331),function(e){var t=e.cart,a=e.totalPrice;return o.a.createElement("div",{className:"cart-table"},o.a.createElement(N.a,{component:"h5",variant:"display1",color:"textSecondary",className:"cart-header"},"YOUR CART"),o.a.createElement(ze.a,null,o.a.createElement(_e.a,null,o.a.createElement(Be.a,null,o.a.createElement(Ue.a,null,o.a.createElement(Ge.a,null,"Product name"),o.a.createElement(Ge.a,{align:"center"},"Category"),o.a.createElement(Ge.a,{align:"right"},"Quantity"),o.a.createElement(Ge.a,{align:"right"},"Price"))),o.a.createElement(qe.a,null,t.map(function(e){var t=e.name,a=e.category,n=e.price,r=e.id,c=e.quantity;return o.a.createElement(Ue.a,{key:r},o.a.createElement(Ge.a,{component:"th",scope:"row"},t),o.a.createElement(Ge.a,{align:"center"},a),o.a.createElement(Ge.a,{align:"center"},c),o.a.createElement(Ge.a,{align:"right"},(n*c).toFixed(2)))})))),o.a.createElement(Qe.a,{label:"Total price: ".concat(a.toFixed(2)),color:"primary",className:"total-price"}))}),Ke=Object(h.b)(function(e){return{cart:e.cart,totalPrice:Se(e)}},null)(Ye),Ve=a(113),Xe=a.n(Ve),Ze=function(){return o.a.createElement("div",{className:"error"},o.a.createElement(N.a,{component:"h3",variant:"h3",color:"textSecondary",className:"error-text"},"Something went wrong."),o.a.createElement(se.a,{to:"/"},o.a.createElement(N.a,{component:"h5",variant:"h5",color:"primary",className:"error-link"},o.a.createElement(Xe.a,{className:"error-icon"}),"Back to homepage")))},$e=function(e){return o.a.createElement(ee.a,null,o.a.createElement(te.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",null,"HOMEPAGE")}}),o.a.createElement(te.a,{exact:!0,path:"/products",component:Ce}),o.a.createElement(te.a,Object.assign({exact:!0,path:"/products/:id",component:Le},e)),o.a.createElement(te.a,{exact:!0,path:"/cart",component:Ke}),o.a.createElement(te.a,{path:"/error",component:Ze}),o.a.createElement(te.a,{component:Ze}))},et=Object(H.createStore)($,Object(B.composeWithDevTools)(Object(H.applyMiddleware)(I.a))),tt=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(h.a,{store:et},o.a.createElement(f.a,null,o.a.createElement(G,null,o.a.createElement($e,null)))))}}]),t}(c.Component);l.a.render(o.a.createElement(tt,null),document.getElementById("root"))}},[[199,2,1]]]);
//# sourceMappingURL=main.f1116e10.chunk.js.map